THREE.TrackballControls=function(n,t){function g(n){i.enabled!==!1&&(window.removeEventListener("keydown",g),b=u,u===r.NONE)&&(n.keyCode!==i.keys[r.ROTATE]||i.noRotate?n.keyCode!==i.keys[r.ZOOM]||i.noZoom?n.keyCode!==i.keys[r.PAN]||i.noPan||(u=r.PAN):u=r.ZOOM:u=r.ROTATE)}function ft(){i.enabled!==!1&&(u=b,window.addEventListener("keydown",g,!1))}function et(n){i.enabled!==!1&&(n.preventDefault(),n.stopPropagation(),u===r.NONE&&(u=n.button),u!==r.ROTATE||i.noRotate?u!==r.ZOOM||i.noZoom?u!==r.PAN||i.noPan||(s.copy(c(n.pageX,n.pageY)),h.copy(s)):(l.copy(c(n.pageX,n.pageY)),v.copy(l)):(o.copy(a(n.pageX,n.pageY)),e.copy(o)),document.addEventListener("mousemove",tt,!1),document.addEventListener("mouseup",it,!1),i.dispatchEvent(k))}function tt(n){i.enabled!==!1&&(n.preventDefault(),n.stopPropagation(),u!==r.ROTATE||i.noRotate?u!==r.ZOOM||i.noZoom?u!==r.PAN||i.noPan||h.copy(c(n.pageX,n.pageY)):v.copy(c(n.pageX,n.pageY)):e.copy(a(n.pageX,n.pageY)))}function it(n){i.enabled!==!1&&(n.preventDefault(),n.stopPropagation(),u=r.NONE,document.removeEventListener("mousemove",tt),document.removeEventListener("mouseup",it),i.dispatchEvent(d))}function rt(n){if(i.enabled!==!1){n.preventDefault();n.stopPropagation();var t=0;n.wheelDelta?t=n.wheelDelta/40:n.detail&&(t=-n.detail/3);l.y+=t*.01;i.dispatchEvent(k);i.dispatchEvent(d)}}function ot(n){var t,f,l,v;if(i.enabled!==!1){switch(n.touches.length){case 1:u=r.TOUCH_ROTATE;o.copy(a(n.touches[0].pageX,n.touches[0].pageY));e.copy(o);break;case 2:u=r.TOUCH_ZOOM_PAN;t=n.touches[0].pageX-n.touches[1].pageX;f=n.touches[0].pageY-n.touches[1].pageY;y=p=Math.sqrt(t*t+f*f);l=(n.touches[0].pageX+n.touches[1].pageX)/2;v=(n.touches[0].pageY+n.touches[1].pageY)/2;s.copy(c(l,v));h.copy(s);break;default:u=r.NONE}i.dispatchEvent(k)}}function st(n){var t,f,o,s;if(i.enabled!==!1){n.preventDefault();n.stopPropagation();switch(n.touches.length){case 1:e.copy(a(n.touches[0].pageX,n.touches[0].pageY));break;case 2:t=n.touches[0].pageX-n.touches[1].pageX;f=n.touches[0].pageY-n.touches[1].pageY;y=Math.sqrt(t*t+f*f);o=(n.touches[0].pageX+n.touches[1].pageX)/2;s=(n.touches[0].pageY+n.touches[1].pageY)/2;h.copy(c(o,s));break;default:u=r.NONE}}}function ht(n){if(i.enabled!==!1){switch(n.touches.length){case 1:e.copy(a(n.touches[0].pageX,n.touches[0].pageY));o.copy(e);break;case 2:p=y=0;var t=(n.touches[0].pageX+n.touches[1].pageX)/2,f=(n.touches[0].pageY+n.touches[1].pageY)/2;h.copy(c(t,f));s.copy(h)}u=r.NONE;i.dispatchEvent(d)}}var i=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},c,a;this.object=n;this.domElement=t!==undefined?t:document;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rotateSpeed=1;this.zoomSpeed=1.2;this.panSpeed=.3;this.noRotate=!1;this.noZoom=!1;this.noPan=!1;this.noRoll=!1;this.staticMoving=!1;this.dynamicDampingFactor=.2;this.minDistance=0;this.maxDistance=Infinity;this.keys=[65,83,68];this.target=new THREE.Vector3;var ut=1e-6,w=new THREE.Vector3,u=r.NONE,b=r.NONE,f=new THREE.Vector3,o=new THREE.Vector3,e=new THREE.Vector3,l=new THREE.Vector2,v=new THREE.Vector2,p=0,y=0,s=new THREE.Vector2,h=new THREE.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();var nt={type:"change"},k={type:"start"},d={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var n=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=n.left+window.pageXOffset-t.clientLeft;this.screen.top=n.top+window.pageYOffset-t.clientTop;this.screen.width=n.width;this.screen.height=n.height}};this.handleEvent=function(n){typeof this[n.type]=="function"&&this[n.type](n)};c=function(){var n=new THREE.Vector2;return function(t,r){return n.set((t-i.screen.left)/i.screen.width,(r-i.screen.top)/i.screen.height),n}}();a=function(){var t=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3;return function(u,e){n.set((u-i.screen.width*.5-i.screen.left)/(i.screen.width*.5),(i.screen.height*.5+i.screen.top-e)/(i.screen.height*.5),0);var o=n.length();return i.noRoll?n.z=o<Math.SQRT1_2?Math.sqrt(1-o*o):.5/o:o>1?n.normalize():n.z=Math.sqrt(1-o*o),f.copy(i.object.position).sub(i.target),t.copy(i.object.up).setLength(n.y),t.add(r.copy(i.object.up).cross(f).setLength(n.x)),t.add(f.setLength(n.z)),t}}();this.rotateCamera=function(){var t=new THREE.Vector3,n=new THREE.Quaternion;return function(){var r=Math.acos(o.dot(e)/o.length()/e.length());r&&(t.crossVectors(o,e).normalize(),r*=i.rotateSpeed,n.setFromAxisAngle(t,-r),f.applyQuaternion(n),i.object.up.applyQuaternion(n),e.applyQuaternion(n),i.staticMoving?o.copy(e):(n.setFromAxisAngle(t,r*(i.dynamicDampingFactor-1)),o.applyQuaternion(n)))}}();this.zoomCamera=function(){var n;u===r.TOUCH_ZOOM_PAN?(n=p/y,p=y,f.multiplyScalar(n)):(n=1+(v.y-l.y)*i.zoomSpeed,n!==1&&n>0&&(f.multiplyScalar(n),i.staticMoving?l.copy(v):l.y+=(v.y-l.y)*this.dynamicDampingFactor))};this.panCamera=function(){var n=new THREE.Vector2,r=new THREE.Vector3,t=new THREE.Vector3;return function(){n.copy(h).sub(s);n.lengthSq()&&(n.multiplyScalar(f.length()*i.panSpeed),t.copy(f).cross(i.object.up).setLength(n.x),t.add(r.copy(i.object.up).setLength(n.y)),i.object.position.add(t),i.target.add(t),i.staticMoving?s.copy(h):s.add(n.subVectors(h,s).multiplyScalar(i.dynamicDampingFactor)))}}();this.checkDistances=function(){i.noZoom&&i.noPan||(f.lengthSq()>i.maxDistance*i.maxDistance&&i.object.position.addVectors(i.target,f.setLength(i.maxDistance)),f.lengthSq()<i.minDistance*i.minDistance&&i.object.position.addVectors(i.target,f.setLength(i.minDistance)))};this.update=function(){f.subVectors(i.object.position,i.target);i.noRotate||i.rotateCamera();i.noZoom||i.zoomCamera();i.noPan||i.panCamera();i.object.position.addVectors(i.target,f);i.checkDistances();i.object.lookAt(i.target);w.distanceToSquared(i.object.position)>ut&&(i.dispatchEvent(nt),w.copy(i.object.position))};this.reset=function(){u=r.NONE;b=r.NONE;i.target.copy(i.target0);i.object.position.copy(i.position0);i.object.up.copy(i.up0);f.subVectors(i.object.position,i.target);i.object.lookAt(i.target);i.dispatchEvent(nt);w.copy(i.object.position)};this.domElement.addEventListener("contextmenu",function(n){n.preventDefault()},!1);this.domElement.addEventListener("mousedown",et,!1);this.domElement.addEventListener("mousewheel",rt,!1);this.domElement.addEventListener("DOMMouseScroll",rt,!1);this.domElement.addEventListener("touchstart",ot,!1);this.domElement.addEventListener("touchend",ht,!1);this.domElement.addEventListener("touchmove",st,!1);window.addEventListener("keydown",g,!1);window.addEventListener("keyup",ft,!1);this.handleResize();this.update()};THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;
//# sourceMappingURL=trackBallControll.min.js.map
